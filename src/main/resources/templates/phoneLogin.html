<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title>Title</title>
    <script src="/js/jquery-2.1.1.min.js"></script>
    <link rel="shortcut icon" type="image/icon" href="/images/jd.ico">
    <link rel="stylesheet" type="text/css" href="/css/login.css">
    <script src="/js/layer/layer.js"></script>
    <link rel="stylesheet" href="/css/body.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/js/bootstrap-3.3.7-dist/css/bootstrap.css">
    <script src="/js/bootstrap-3.3.7-dist/js/bootstrap.js"></script>
</head>
<script type="text/javascript">
    var temp=null;
    var time=60;
    function timeDown(){
        /*ajax start*/
        $.ajax({
            url:"/phoneLogin/sendCode",
            type:"POST",
            data:$("#form").serialize(),
            success:function(result){
                if(result.code==1){ //验证码发送成功  开始倒计时
                    $("#sendCode").prop("disabled",true)
                    temp = setInterval("changeBtnText()",1000);
                }else if(result.code==2){
                    $("#sendCode").prop("disabled",true)
                    layer.msg("已经发送验证码,请查看手机!");
                }else if(result.code==3){
                    layer.msg("您的手机号已经在黑名单中");
                }
            },
            error:function(){
                layer.msg("ajax访问失,请看控制台");
            }
        });
        /*ajax end*/
    }
    function changeBtnText(){
        time--;
        $("#sendCode").html("还剩"+time+"秒");
        if(time<=0){
            time=60;
            $("#sendCode").prop("disabled",false);
            $("#sendCode").html("重新发送");
            clearInterval(temp);
        }
    }
    function checkPhone(){
        var phone=$("[name='phone_no']").val();
        if(phone.length!=11){
            layer.msg("手机号码必须为11位");
            return ;
        }else{
            timeDown();
        }
    }
    function checkCode(){
        $.ajax({
            url:"/phoneLogin/checkCode",
            type:"POST",
            data:$("#form").serialize(),
            success:function(result){
                if(result==2){
                    layer.msg("您的手机号已经在黑名单中");
                }else if(result==1){
                    window.location.href="/toView?viewName=mall-home-page";
                }else if(result==3){
                 layer.msg("没有检测到您的手机号");
                }
            },
            error:function(){
                layer.msg("ajax访问失败,请看控制台");
            }
        });
    }
</script>
<body>
<div class="up" >
    <img src="/div1.jpg" height="45px;" class="hy_img">
    <div class="hy">
        欢迎登录
    </div>
</div>
<div class="middle" style="background:#ccffff">
    <div>
         <div style="margin-top: 50px;background: #ef4d4d;height: 70px" >

         </div>
    </div>
    <div class="login">
        <div class="l1 ">
            <div class="l1_font_01 ">The first team <font color="red">VIP</font></div>
            <a class="l1_font_02 " href="/login/toView?viewName=zhuce">用户注册</a>
        </div>
        <div class="blank_01"></div>
        <div class="ts">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </div>
        <div class="blank_01"></div>
        <form id="form">
            <div style="width: 70%">
                <div>
                    <input name="phone_no" type="text" class="form-control" id="inputPassword"
                           placeholder="手机号">
                </div>
            </div>
                <button type="button" onclick="checkPhone()" id="sendCode" class="btn btn-default">发送验证码</button>
            <div style="width: 70%">
                <div>
                    <input id="yzm" name="verify_code" type="text" class="form-control"  placeholder="验证码">
                </div>
            </div>
            <div>
            </div>
        </form>
        <div class="blank_01"></div>
        <a href="#" class="aline">
            <div style="background: #FF8C69;" class="red_button" onclick="checkCode()">
                登&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;录
            </div>
        </a>
        <div class="blank_01"></div>
        <div class="blank_01"></div>
        <div class="box_down">
            <div class="box_down_1">使用合作网站账号登录京东：</div>
            <div class="box_down_1">京东钱包&nbsp;&nbsp;|&nbsp;&nbsp;QQ
                &nbsp;&nbsp;|&nbsp;&nbsp;微信
            </div>
        </div>
    </div>
</div>

<div class="down">
    <br>
    <font size="5px">最终解释权归第一组所有!!!!!</font>
</div>

</body>
</html>


